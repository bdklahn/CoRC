<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Managing Model Entities • CoRC</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">CoRC</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/CoRC.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/entity_management.html">Managing Model Entities</a>
    </li>
    <li>
      <a href="../articles/issues.html">Issues</a>
    </li>
    <li>
      <a href="../articles/model_building.html">Model Building</a>
    </li>
    <li>
      <a href="../articles/task_management.html">Managing Tasks</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jpahle/CoRC">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Managing Model Entities</h1>
                        <h4 class="author">Jonas Förster &amp; Jürgen Pahle</h4>
            
            <h4 class="date">2017-09-27</h4>
          </div>

    
    
<div class="contents">
<div id="initial-setup" class="section level1">
<h1 class="hasAnchor">
<a href="#initial-setup" class="anchor"></a>Initial Setup</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(CoRC)
<span class="kw"><a href="../reference/loadExamples.html">loadExamples</a></span>(<span class="dv">2</span>)
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; # A copasi model reference:</span>
<span class="co">#&gt; Model name: "Bacterial chemotaxis model"</span>
<span class="co">#&gt; Number of compartments: 1</span>
<span class="co">#&gt; Number of species: 21</span>
<span class="co">#&gt; Number of reactions: 14</span>
<span class="kw"><a href="../reference/entity_finders.html">species</a></span>()
<span class="co">#&gt;  [1] "CheA"     "CheAp"    "CheB"     "CheBp"    "CheY"     "CheYp"   </span>
<span class="co">#&gt;  [7] "CheR"     "Tactive"  "CheZ"     "T0"       "T1"       "T2"      </span>
<span class="co">#&gt; [13] "T3"       "T4"       "L"        "Tactive0" "Tactive1" "Tactive2"</span>
<span class="co">#&gt; [19] "Tactive3" "Tactive4" "Ttotal"</span></code></pre></div>
</div>
<div id="identifying-entities" class="section level1">
<h1 class="hasAnchor">
<a href="#identifying-entities" class="anchor"></a>Identifying entities</h1>
<p>There are at the moment six different types of model entities supported for identification by string. The strings are matched against the available entity names. These functions return an entity <code>key</code> when a species is identified.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/entity_finders.html">species</a></span>(<span class="st">"CheA"</span>)
<span class="co">#&gt; [1] "CheA"  "CheAp"</span>
<span class="kw"><a href="../reference/entity_finders.html">compartment</a></span>(<span class="st">"comp"</span>)
<span class="co">#&gt; [1] "Compartments[compartment]"</span>
<span class="kw"><a href="../reference/entity_finders.html">quantity</a></span>(<span class="st">"a"</span>)
<span class="co">#&gt; character(0)</span>
<span class="kw"><a href="../reference/entity_finders.html">reaction</a></span>(<span class="st">"Che B phosph"</span>)
<span class="co">#&gt; [1] "(Che B phosph)"</span>
<span class="kw"><a href="../reference/entity_finders.html">parameter</a></span>(<span class="st">"4).kR"</span>)
<span class="co">#&gt; [1] "(Rm4).kR"</span>
<span class="kw"><a href="../reference/entity_finders.html">kinfunction</a></span>(<span class="st">"Michaelis-Menten"</span>)
<span class="co">#&gt; [1] "FunctionDB.Functions[Henri-Michaelis-Menten (irreversible)]"</span>
<span class="co">#&gt; [2] "FunctionDB.Functions[Reversible Michaelis-Menten]"</span></code></pre></div>
<p>There are <code>_strict</code> variants that will always return a vector of <code>key</code>s of the same length as the input or throw an error. Accordingly, the behavior for <code>NA</code> or non-uniquely matching strings is to throw an error. This allows the <code>_strict</code> variants to uniquely identify species by giving the full name, when the other methods might then still return multiple matches.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/entity_finders.html">species</a></span>(<span class="st">"CheY"</span>)
<span class="co">#&gt; [1] "CheY"  "CheYp"</span>
<span class="kw"><a href="../reference/entity_finders.html">species_strict</a></span>(<span class="st">"CheY"</span>)
<span class="co">#&gt; [1] "CheY"</span>
<span class="kw"><a href="../reference/entity_finders.html">species_strict</a></span>(<span class="st">"CheYp"</span>)
<span class="co">#&gt; [1] "CheYp"</span>
<span class="kw"><a href="../reference/entity_finders.html">species_strict</a></span>(<span class="kw">c</span>(<span class="st">"CheY"</span>, <span class="st">"CheYp"</span>))
<span class="co">#&gt; [1] "CheY"  "CheYp"</span>
<span class="kw"><a href="../reference/entity_finders.html">species_strict</a></span>(<span class="st">"Che"</span>)
<span class="co">#&gt; Error: "Che" matches species "CheA", "CheAp", "CheB", "CheBp", "CheY", "CheYp", "CheR", "CheZ".</span>
<span class="kw"><a href="../reference/entity_finders.html">species_strict</a></span>(<span class="kw">c</span>(<span class="ot">NA</span>, <span class="st">"CheY"</span>))
<span class="co">#&gt; Error: key contains 1 missing values</span>
<span class="kw"><a href="../reference/entity_finders.html">species_strict</a></span>(<span class="st">"failure"</span>)
<span class="co">#&gt; Error: Couldn't match species "failure".</span></code></pre></div>
<p>CoRC makes use of the regex functionality of the stringr package. You can therefore wrap any string via <code><a href="../reference/regex.html">regex(string)</a></code> to enable regex matching.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/entity_finders.html">species</a></span>(<span class="kw"><a href="../reference/regex.html">regex</a></span>(<span class="st">"Che.p"</span>))
<span class="co">#&gt; [1] "CheAp" "CheBp" "CheYp"</span></code></pre></div>
<p>In cases, where a function argument <code>key</code> is clear to always expect the same kind of entity, identification can also be handled by the function itself. These methods will always use the <code>_strict</code> variants to reliably match species.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/getSpecies.html">getSpecies</a></span>(<span class="dt">key =</span> <span class="kw"><a href="../reference/entity_finders.html">species</a></span>(<span class="st">"CheY"</span>))<span class="op">$</span>name
<span class="co">#&gt; [1] "CheY"  "CheYp"</span>
<span class="kw"><a href="../reference/getSpecies.html">getSpecies</a></span>(<span class="dt">key =</span> <span class="kw"><a href="../reference/entity_finders.html">species_strict</a></span>(<span class="st">"CheY"</span>))<span class="op">$</span>name
<span class="co">#&gt; [1] "CheY"</span>
<span class="kw"><a href="../reference/getSpecies.html">getSpecies</a></span>(<span class="dt">key =</span> <span class="st">"CheY"</span>)<span class="op">$</span>name
<span class="co">#&gt; [1] "CheY"</span>
<span class="kw"><a href="../reference/getSpecies.html">getSpecies</a></span>(<span class="st">"CheY"</span>)<span class="op">$</span>name
<span class="co">#&gt; [1] "CheY"</span>
<span class="kw"><a href="../reference/getSpecies.html">getSpecies</a></span>(<span class="st">"Che"</span>)<span class="op">$</span>name
<span class="co">#&gt; Error: "Che" matches species "CheA", "CheAp", "CheB", "CheBp", "CheY", "CheYp", "CheR", "CheZ".</span>
<span class="kw"><a href="../reference/getSpecies.html">getSpecies</a></span>(<span class="kw"><a href="../reference/entity_finders.html">species</a></span>(<span class="kw"><a href="../reference/regex.html">regex</a></span>(<span class="st">"Che.p"</span>)))<span class="op">$</span>name
<span class="co">#&gt; [1] "CheAp" "CheBp" "CheYp"</span></code></pre></div>
</div>
<div id="using-references" class="section level1">
<h1 class="hasAnchor">
<a href="#using-references" class="anchor"></a>Using References</h1>
<p>The identifying functions can also return value references if specified. Such references are needed as input for example for expressions, which are needed for example in value assignments and the optimization task. Expressions in CoRC appear similar to copasi.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/entity_finders.html">species</a></span>(<span class="st">"CheY"</span>, <span class="dt">reference =</span> <span class="st">"InitialConcentration"</span>)
<span class="co">#&gt; [1] "{[CheY]_0}"  "{[CheYp]_0}"</span></code></pre></div>
<p>These functions however can not give any clues about what references are available.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/entity_finders.html">species</a></span>(<span class="st">"CheY"</span>, <span class="dt">reference =</span> <span class="st">"failure"</span>)
<span class="co">#&gt; Error: Failed to gather reference "failure".</span></code></pre></div>
<p>To help with this, functions implemented to get model values have similar functions that return references instead of values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(<span class="kw"><a href="../reference/getSpecies.html">getSpecies</a></span>(<span class="st">"CheY"</span>))
<span class="co">#&gt; Classes 'tbl_df', 'tbl' and 'data.frame':    1 obs. of  12 variables:</span>
<span class="co">#&gt;  $ key                  : chr "CheY"</span>
<span class="co">#&gt;  $ name                 : chr "CheY"</span>
<span class="co">#&gt;  $ compartment          : chr "compartment"</span>
<span class="co">#&gt;  $ type                 : chr "reactions"</span>
<span class="co">#&gt;  $ initial_concentration: num 9.7</span>
<span class="co">#&gt;  $ initial_number       : num 8178</span>
<span class="co">#&gt;  $ concentration        : num NaN</span>
<span class="co">#&gt;  $ number               : num NaN</span>
<span class="co">#&gt;  $ rate                 : num 0</span>
<span class="co">#&gt;  $ number_rate          : num 0</span>
<span class="co">#&gt;  $ initial_expression   : chr NA</span>
<span class="co">#&gt;  $ expression           : chr NA</span>
<span class="kw">str</span>(<span class="kw"><a href="../reference/getSpeciesReferences.html">getSpeciesReferences</a></span>(<span class="st">"CheY"</span>))
<span class="co">#&gt; Classes 'tbl_df', 'tbl' and 'data.frame':    1 obs. of  12 variables:</span>
<span class="co">#&gt;  $ key                  : chr "CheY"</span>
<span class="co">#&gt;  $ name                 : chr "CheY"</span>
<span class="co">#&gt;  $ compartment          : chr "compartment"</span>
<span class="co">#&gt;  $ type                 : chr "reactions"</span>
<span class="co">#&gt;  $ initial_concentration: chr "{[CheY]_0}"</span>
<span class="co">#&gt;  $ initial_number       : chr "{CheY.InitialParticleNumber}"</span>
<span class="co">#&gt;  $ concentration        : chr "{[CheY]}"</span>
<span class="co">#&gt;  $ number               : chr "{CheY.ParticleNumber}"</span>
<span class="co">#&gt;  $ rate                 : chr "{CheY.Rate}"</span>
<span class="co">#&gt;  $ number_rate          : chr "{CheY.ParticleNumberRate}"</span>
<span class="co">#&gt;  $ initial_expression   : chr NA</span>
<span class="co">#&gt;  $ expression           : chr NA</span></code></pre></div>
</div>
<div id="extension-suggestion" class="section level1">
<h1 class="hasAnchor">
<a href="#extension-suggestion" class="anchor"></a>Extension suggestion</h1>
<p>Using numbers for referencing:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/entity_finders.html">species</a></span>()[<span class="dv">5</span>]
<span class="co">#&gt; [1] "CheY"</span>
<span class="kw"><a href="../reference/getSpecies.html">getSpecies</a></span>(<span class="kw"><a href="../reference/entity_finders.html">species</a></span>()[<span class="dv">5</span>])<span class="op">$</span>name
<span class="co">#&gt; [1] "CheY"</span></code></pre></div>
<p>Maybe I should allow integers to be passed as keys:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/entity_finders.html">species</a></span>(<span class="dv">5</span>)
<span class="co">#&gt; Error: key is not a string (a length one character vector).</span>
<span class="kw"><a href="../reference/entity_finders.html">species_strict</a></span>(<span class="dv">5</span>)
<span class="co">#&gt; Error: key is not a character vector</span>
<span class="kw"><a href="../reference/getSpecies.html">getSpecies</a></span>(<span class="dv">5</span>)<span class="op">$</span>name
<span class="co">#&gt; Error: key is not a character vector</span></code></pre></div>
</div>
<div id="entity-modification" class="section level1">
<h1 class="hasAnchor">
<a href="#entity-modification" class="anchor"></a>Entity modification</h1>
<p>For most kinds of entities there is a finder function (e.g. species), a getter function (e.g. getSpecies) and a setter function (e.g. setSpecies).</p>
<p>Other ways to access model Values is by evaluating expressions (e.g. getValue).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/getSpecies.html">getSpecies</a></span>(<span class="st">"CheYp"</span>)<span class="op">$</span>initial_concentration
<span class="co">#&gt; [1] 0</span>

<span class="kw"><a href="../reference/setSpecies.html">setSpecies</a></span>(<span class="st">"CheYp"</span>, <span class="dt">initial_concentration =</span> <span class="dv">1</span>)
<span class="kw"><a href="../reference/getSpecies.html">getSpecies</a></span>(<span class="st">"CheYp"</span>)<span class="op">$</span>initial_concentration
<span class="co">#&gt; [1] 1</span>

yp_init_expression &lt;-<span class="st"> </span><span class="kw"><a href="../reference/entity_finders.html">species</a></span>(<span class="st">"CheYp"</span>, <span class="dt">reference =</span> <span class="st">"InitialConcentration"</span>)
yp_init_expression
<span class="co">#&gt; [1] "{[CheYp]_0}"</span>
<span class="kw"><a href="../reference/getValue.html">getValue</a></span>(yp_init_expression)
<span class="co">#&gt; [1] 1</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#initial-setup">Initial Setup</a></li>
      <li><a href="#identifying-entities">Identifying entities</a></li>
      <li><a href="#using-references">Using References</a></li>
      <li><a href="#extension-suggestion">Extension suggestion</a></li>
      <li><a href="#entity-modification">Entity modification</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jonas Förster, Jürgen Pahle.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
